define(["jquery","core/ajax","core/str","core/log","mod_wordcards/youglish"],(function($,ajax,str,log,youglish){const SELECTOR_CARDCONTAINER=".flip-card",SELECTOR_CARD=".definition_flashcards .wc-faces.flip-card-inner",SELECTOR_BACKFACE='[data-face="details"]',SELECTOR_YOUGLISH_HOLDER=".term-video",SELECTOR_YOUGLISH_PLACEHOLDER=".youglish-placeholder",EVENT_CLICK="click";const clearYouGlish=function(e){if(void 0!==e){const localCurrTar=$(e.currentTarget);var termid=localCurrTar.data("termid"),termvideo=$("div.term-video-"+termid),termimage=$("div.term-image-"+termid);termvideo.hide(),termimage.show(),localCurrTar.removeClass("isselected video-selected")}else{termvideo=$("div.term-video"),termimage=$("div.term-image");termvideo.hide(),termimage.show(),$(".btn.retrieve-video").removeClass("isselected video-selected")}youglish.clear()},initButtonListeners=function(){var showVideoPlayer=function(e){const localCurrTar=$(e.currentTarget);var termid=localCurrTar.data("termid"),termvideo=$("div.term-video-"+termid),termimage=$("div.term-image-"+termid);termvideo.show(),termimage.hide(),termimage.length>0?localCurrTar.addClass("isselected video-selected"):localCurrTar.addClass("isselected"),function(currentface){log.debug("loadYouGlish");var youglishholder=currentface.find(SELECTOR_YOUGLISH_HOLDER),youglishplaceholder=currentface.find(SELECTOR_YOUGLISH_PLACEHOLDER);youglish.load(youglishplaceholder.data("lang"),youglishplaceholder.data("term"),youglishplaceholder.data("accent"),youglishholder)}(localCurrTar.closest(SELECTOR_BACKFACE))};$(SELECTOR_CARDCONTAINER).on(EVENT_CLICK,(function(e){const actualTar=$(e.currentTarget).children();actualTar.hasClass("show-back-side")?actualTar.removeClass("show-back-side"):actualTar.addClass("show-back-side")})),$(".retrieve-video")&&$(".retrieve-video").on(EVENT_CLICK,(function(e){e.stopPropagation(),$(e.currentTarget).hasClass("isselected")?function(e){clearYouGlish(e)}(e):showVideoPlayer(e)}))};return{init:function(youglish){$(document).ready((function(){var callback,youglishprops;str.get_strings([{key:"addtomywords",component:"mod_wordcards"},{key:"removefrommywords",component:"mod_wordcards"}]).done((function(strings){strings,"function"==typeof callback&&callback()})),initButtonListeners(),youglish&&(youglishprops=youglish,$.getScript("https://youglish.com/public/emb/widget.js",(function(){YG.setParnterKey(youglishprops.token)})))}))},clearYouGlish:clearYouGlish,restoreCards:function(){$(SELECTOR_CARD).removeClass("show-back-side")}}}));

//# sourceMappingURL=cardactions.min.js.map